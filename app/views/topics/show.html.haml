%p
  %strong Name:
  = @topic.name

%p
  %strong Description:
  = @topic.description

  %strong Created by:
  = @created_by.name

Posts:

- if @associated_posts.present?
  %table
    %thead
      %tr
        %th Name
        %th Body
        %th{colspan: "3"}

    %tbody
      - @associated_posts.each do |post|
        %tr
          %td
            = post.name
          %td
            = post.body
          %td
            = link_to 'Show', post
          %td
            - if can? :update, post
              = link_to 'Edit', edit_post_path(post)
          %td
            - if can? :destroy, post
              = link_to 'Delete', post_path(post), method: :delete, data: { confirm: 'Are you sure?' }
- else
  "None"

%br

= link_to 'Add post', controller: "posts", action: "new", topic_ref: @topic
|
- if can? :update, @topic
  = link_to 'Edit', edit_topic_path(@topic)
  |
= link_to 'Topics', topics_path
