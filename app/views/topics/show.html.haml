%div{class: "container mt-3 mb-3 text-center"}

  %h2{class: "mb-3"}
    = @topic.name

  %p
    %strong Created by:
    = @created_by.name

  %p
    %strong Description:
  %p
    = @topic.description

  %h3
    Discussion:

%div{class: "container col-8 text-center"}
  - if @associated_posts.present?
    - @associated_posts.each do |post|
      %div{class: "card p-2 m-1"}
        %h5{style: "text-align: left"}
          = post.name
        %p{style: "text-align: left"}
          = post.body
        %p{style: "text-align: right"}
          = link_to 'Details', post, class: "btn btn-outline-primary"
          - if can? :update, post
            |
            = link_to 'Edit', edit_post_path(post), class: "btn btn-outline-primary"
          - if can? :destroy, post
            |
            = link_to 'Delete', post_path(post), method: :delete,
              data: { confirm: 'Are you sure?' },
              class: "btn btn-outline-danger"
  - else
    %p
      "None"

  %div{class: "container mb-3 mt-3"}
    = link_to 'Add post', {controller: "posts", action: "new", topic_ref: @topic},
    class: "btn btn-success"
    |
    - if can? :update, @topic
      = link_to 'Edit', edit_topic_path(@topic), class: "btn btn-primary"
