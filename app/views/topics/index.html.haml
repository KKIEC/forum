%h1 Topics


= form_with url: topics_path, method: :get do |f|
  %div{class: "field"}
    = f.label :search, "Search by name:"
    = f.text_field :search
  %div{class: "actions"}
    = f.submit "Search", name: nil

%table
  %thead
    %tr
      %th Name
      %th Description
      %th Categories
      %th{colspan: "3"}

  %tbody
    - @topics.each do |topic|
      %tr
        %td
          = topic.name
        %td
          = topic.description
        %td
          - topic.categories.each do |cat|
            = cat.name
            %br
        %td
          = link_to 'Show', topic
        %td
          - if can? :update, topic
            = link_to 'Edit', edit_topic_path(topic)
        %td
          - if can? :destroy, topic
            = link_to 'Destroy', topic, method: :delete, data: { confirm: 'Are you sure?' }

%br

- if can? :create, Topic
  = link_to 'New Topic', new_topic_path
